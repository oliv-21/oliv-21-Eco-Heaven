<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500;700;900&display=swap" rel="stylesheet">
    <title>EcoHaven Dashboard</title>
    <link rel="stylesheet" href="../../static/thumbnail/seller-page/add-product.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <script src="/static/js-seller/Seller.js"></script>
    <script src="/static/js-login/error-message.js"></script>
</head>
<body>
    <div class="header">
        <div class="logo-container">
            <a href="{{ url_for('seller_dashboard') }}"><img class="logo" src="../../static/thumbnail/logo.png.png" alt=""></a>
        </div>

        <div class="profile-container" id="sellerinformation">
            <img class="profile-img" src="{{ url_for('static', filename='uploads/' + profile_pic) }}" alt="Profile Picture"> 
            <span id="user-name">{{ username }}</span>
            <a href=" /seller-notification "><i class="fas fa-bell"></i></a>
         </div>         
    </div>

    <div class="container">
        <nav class="sidebar">
            <ul>
                <a href="/seller_dashboard"><li   >Dashboard</li></a>
                <a href="/seller-page/products"><li class="active"    >Products</li></a>
                <a href="/seller/update-stock"><li > Stocks</li> </a>
                <a href="/seller/sales"><li  >Sales</li></a>
                <a href="/seller/orders"><li  >Orders</li></a>   
            </ul>
        </nav>

        <!-- Main Content -->   
        <main class="main-content">
            <form class="form-container" action="/seller/add-product" method="POST" enctype="multipart/form-data">
                <a class="back" href="/seller-page/products"><i class="fa-solid fa-arrow-left"></i> Back</a>
                <div class="inputField">
                    <label for="image">Upload Image:</label><br>
                    <input type="file" name="image" required><br>
                </div>
                <div class="inputField">
                    <label for="product-name">Product Name:</label><br>
                    <input type="text" placeholder="Enter Product Name" name="product-name" required><br>
                </div>
                <div class="inputField">
                    <label for="price">Price:</label><br>
                    <input type="text" placeholder="Enter Price" name="price" required><br>
                </div>
                <div class="inputField">
                    <label for="description">Product Description:</label><br>
                    <textarea id="description" name="description" rows="4" cols="50" placeholder="Enter product description here..."></textarea>
                </div>
                <div class="inputField">
                    <label for="category">Category:</label>
                    <select id="category" name="category" required>
                        <option value="">-- Select Category --</option>
                        <option value="Gardening Tools">Gardening Tools</option>
                        <option value="Outdoor Living">Outdoor Living</option>
                        <option value="Home Tools">Home Tools</option>
                        <option value="Kitchen Appliances">Kitchen Appliances</option>
                        <option value="Furniture">Furniture</option>
                        <option value="Decor">Decor</option>
                        <option value="Bedding">Bedding</option>
                        <option value="Bath">Bath</option>
                        <option value="Others">Others</option>
                    </select>
                </div>

                <div id="variations-main-container">
                    <!-- Combined Variation Section -->
                    <div class="variation-section">
                        <label>Variations:</label>
                        <div class="variations-container">
                            <!-- Dynamic variation inputs will be added here -->
                        </div>
                        <button type="button" class="add-variation-btn" onclick="addVariation()">+ Add Variation</button>
                    </div>
                </div>
            
                <button type="submit" class="submit-btn">SUBMIT</button>
            </form>
            
            <script>
                function addVariation() {
                    const variationsContainer = document.querySelector('.variations-container');

                    // Create a container for each variation entry
                    const variationDiv = document.createElement('div');
                    variationDiv.className = 'variation-option';

                    // Variation type selector
                    const variationTypeSelect = document.createElement('select');
                    variationTypeSelect.name = 'variation_type[]';
                    variationTypeSelect.innerHTML = `
                        <option value="color_size">Color + Size</option>
                        <option value="color_only">Color Only</option>
                        <option value="size_only">Size Only</option>
                    `;
                    variationDiv.appendChild(variationTypeSelect);

                    // Color input (conditional)
                    const colorInput = document.createElement('input');
                    colorInput.type = 'text';
                    colorInput.name = 'variation_color[]'; // Use array notation for colors
                    colorInput.placeholder = 'Enter color (e.g., blue)';
                    variationDiv.appendChild(colorInput);

                    // Size input (conditional)
                    const sizeInput = document.createElement('input');
                    sizeInput.type = 'text';
                    sizeInput.name = 'variation_size[]'; // Use array notation for sizes
                    sizeInput.placeholder = 'Enter size (e.g., M, L)';
                    variationDiv.appendChild(sizeInput);

                    // Stock input
                    const stockInput = document.createElement('input');
                    stockInput.type = 'number';
                    stockInput.name = 'variation_stock[]'; // Use array notation for stock
                    stockInput.placeholder = 'Enter stock quantity';
                    variationDiv.appendChild(stockInput);

                    // Remove button
                    const removeButton = document.createElement('button');
                    removeButton.type = 'button';
                    removeButton.textContent = 'Remove';
                    removeButton.className = 'remove-variation-btn';
                    removeButton.addEventListener('click', function() {
                        variationsContainer.removeChild(variationDiv);
                    });
                    variationDiv.appendChild(removeButton);

                    // Handle display logic based on selected variation type
                    variationTypeSelect.addEventListener('change', function() {
                        const value = this.value;
                        colorInput.style.display = 'block'; // Show color input by default
                        sizeInput.style.display = 'block'; // Show size input by default

                        if (value === 'color_only') {
                            sizeInput.style.display = 'none'; // Hide size input for color only
                        } else if (value === 'size_only') {
                            colorInput.style.display = 'none'; // Hide color input for size only
                        }
                    });

                    // Add the variation div to the variations container
                    variationsContainer.appendChild(variationDiv);
                }
            </script>
        </main>
    </div>
</body>
</html>
