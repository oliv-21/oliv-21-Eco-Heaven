<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../../static/thumbnail/Homepage/tracking.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900&display=swap" rel="stylesheet">
  <script src="/static/js-buyer/buyer.js"></script>
  <title>Place Order</title>
</head>
<body>
  <div class="header">
    <div class="logo-container" id="dashboard">
      <a href="../homepage/homepage.html"><img class="logo" src="../../static/thumbnail/logo.png.png" alt=""></a>
    </div>
    
    <div class="search-container">
      <input class="search-bar" type="text" placeholder="Search">
      <button class="search-btn">
        <img src="../../static/thumbnail/search.svg" alt="">
      </button>
    </div>

    <div class="icon-container">
      <div class="cart-icon" id="cart-link">
        <img src="../../static/thumbnail/cart.svg" alt="">
      </div>
      <div class="order-icon" id="order-link">
        <img src="../../static/thumbnail/order-history.svg" alt="">
      </div>
    </div>
    
    <div class="profile-container" id="profileInformationbuyer">
      <img class="profile-img" src="{{ url_for('static', filename='uploads/' + profile_pic) }}" alt="Profile Picture"> 
      <span id="user-name">{{ username }}</span>
      <a href="/notification"><i class="fas fa-bell"></i></a>
    </div>
  </div>
  <a class="chatbtn" href="/chat"><i class="fas fa-comments"></i> Chat</a>

  <div class="main">
    <div class="order-tracking">
      <a class="back-to-orders-link" href="{{ url_for('user_orders') }}">
        <i class="fa-solid fa-arrow-left"></i> View all orders
      </a>

      <div class="delivery-date">
        <div>Arriving on Monday, June 13</div>
        <div>
          <form action="/update-order-status" method="POST" onsubmit="return confirmStatusChange();">
            <input type="hidden" name="order_id" value="{{ order_details.order_id }}">
            <input type="hidden" name="status" value="Completed">
            <button 
              type="submit" 
              class="received-btn" 
              {% if order_detail.delivery_status != 'Completed' %} disabled {% endif %}
            >
              {% if order_details.order_status == 'Completed' %}
                Order Complete
              {% else %}
                Order Received
              {% endif %}
            </button>
          </form>
        </div>
      </div>

      <div class="product-info">
        {{ order_details.product_name }}
        <p class="variation">Variation: <span>{{ order_details.color }}</span> | <span>{{ order_details.size }}</span></p>
      </div>

      <div class="product-info">
        Quantity: {{ order_details.quantity }}
      </div>

      <img class="product-image" src="{{ url_for('static', filename='uploads/' + order_details.image) }}" alt="Product Image">

      <div class="progress-labels-container">
        <div class="progress-label">Order Placed</div>
        <div class="progress-label">Approved</div>
        <div class="progress-label">Shipped</div>
        <div class="progress-label ">Out for Delivery</div>
        <div class="progress-label">Completed</div>
      </div>

      <div class="progress-bar-container">
        <div class="progress-bar"></div>
      </div>
    </div>
  </div>
  
  <footer class="footer-container">
    <div class="footer-logo">
      <img src="../../static/thumbnail/logo.png.png" alt="EcoHaven-Logo">
    </div>

    <div class="info-container">
      <div class="devteam-container">
        <ul>
          <li>EcoHaven-IT Development Team</li>
          <li>Elca, Eirich M.</li>
          <li>Oliveros, Roldan A.</li>
          <li>Villodo, Nina Clarisse R.</li>
          <li>Javier, Jonamie C.</li>
        </ul>
      </div>
      <div class="social-container">
        <ul>
          <li>Contact Us</li>
          <li><a href="#"><i class="fab fa-facebook"></i> EcoHaven_Official</a></li>
          <li><a href="#"><i class="fab fa-instagram"></i> @EcoHaven</a></li>
          <li><a href="#"><i class="fas fa-envelope"></i> EcoHaven@gmail.com</a></li>
          <li><a href="#"><i class="fab fa-tiktok"></i> EcoHaven_ph</a></li>
        </ul>
      </div>
    </div>

    <div class="copy-right">
      <p class="copy-right-text">Â© 2024 EcoHaven. All Rights Reserved.</p>
    </div>
  </footer>

  <script>
    function confirmStatusChange() {
      return confirm("Are you sure you want to update the order status?");
    }

    // Assuming you have a variable to determine the order status
    let orderStatus = "{{ order_details.order_status }}"; // Replace with your dynamic value

    // Get the progress bar element
    let progressBar = document.querySelector('.progress-bar');

    // Check the order status and adjust the width accordingly
    if (orderStatus === 'Completed') {
      progressBar.style.width = '100%';

    } else if (orderStatus === 'Out For Delivery'){
      progressBar.style.width = '75%'; // Adjust this percentage as needed
    } else if (orderStatus === 'Shipped'){
      progressBar.style.width = '50%'; // Default case
    } else if (orderStatus === 'Approved'){
      progressBar.style.width = '30%';
    }else{
       progressBar.style.width = '5%';
    }
  </script>
</body>
</html>
